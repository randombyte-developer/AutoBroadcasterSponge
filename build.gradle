plugins {
    id 'org.spongepowered.plugin' version '0.6'
    id 'com.github.johnrengelman.shadow' version '1.2.4'
}

group 'io.github.aadeg.autobroadcaster'
version '0.2.1'

apply plugin: 'java'


targetCompatibility = '1.8'
sourceCompatibility = '1.8'

repositories {
    mavenCentral()
    maven {
        name = 'sponge'
        url = 'http://repo.spongepowered.org/maven'
    }
    maven { url 'https://jitpack.io' }
}

group = 'io.github.aadeg.autobroadcaster'
version = '0.2.1'
description = 'AutoBoardcaster'

configurations {
    compile.extendsFrom shadow
}

dependencies {
    shadow 'org.jetbrains.kotlin:kotlin-stdlib-jre8:1.1.2-5' // for kosp
    compile 'org.spongepowered:spongeapi:5.0.0'
    shadow('com.github.randombyte-developer.kosp:kosp:v0.4.3.2') { transitive = false }
}

jar.enabled = false

shadowJar {
    configurations = [project.configurations.shadow]

    relocate 'kotlin', 'io.github.aadeg.autobroadcaster.shaded.kotlin'
    relocate 'de.randombyte.kosp', 'io.github.aadeg.autobroadcaster.shaded.kosp'

    classifier = null // Remove '-all' suffix from output file name
}
build.dependsOn shadowJar